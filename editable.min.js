!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,c){"undefined"!=typeof b&&b.exports?b.exports.browser=c():"function"==typeof define&&define.amd?define(c):this[a]=c()}("bowser",function(){function a(a){function c(b){var c=a.match(b);return c&&c.length>1&&c[1]||""}function d(b){var c=a.match(b);return c&&c.length>1&&c[2]||""}var e,f=c(/(ipod|iphone|ipad)/i).toLowerCase(),g=/like android/i.test(a),h=!g&&/android/i.test(a),i=c(/edge\/(\d+(\.\d+)?)/i),j=c(/version\/(\d+(\.\d+)?)/i),k=/tablet/i.test(a),l=!k&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?e={name:"Opera",opera:b,version:j||c(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(a)?(e={name:"Windows Phone",windowsphone:b},i?(e.msedge=b,e.version=i):(e.msie=b,e.version=c(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(a)?e={name:"Internet Explorer",msie:b,version:c(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(a)?e={name:"Microsoft Edge",msedge:b,version:i}:/chrome|crios|crmo/i.test(a)?e={name:"Chrome",chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:f?(e={name:"iphone"==f?"iPhone":"ipad"==f?"iPad":"iPod"},j&&(e.version=j)):/sailfish/i.test(a)?e={name:"Sailfish",sailfish:b,version:c(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?e={name:"SeaMonkey",seamonkey:b,version:c(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(e={name:"Firefox",firefox:b,version:c(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(e.firefoxos=b)):/silk/i.test(a)?e={name:"Amazon Silk",silk:b,version:c(/silk\/(\d+(\.\d+)?)/i)}:h?e={name:"Android",version:j}:/phantom/i.test(a)?e={name:"PhantomJS",phantom:b,version:c(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?e={name:"BlackBerry",blackberry:b,version:j||c(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(a)?(e={name:"WebOS",webos:b,version:j||c(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(e.touchpad=b)):e=/bada/i.test(a)?{name:"Bada",bada:b,version:c(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(a)?{name:"Tizen",tizen:b,version:c(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||j}:/safari/i.test(a)?{name:"Safari",safari:b,version:j}:{name:c(/^(.*)\/(.*) /),version:d(/^(.*)\/(.*) /)},!e.msedge&&/(apple)?webkit/i.test(a)?(e.name=e.name||"Webkit",e.webkit=b,!e.version&&j&&(e.version=j)):!e.opera&&/gecko\//i.test(a)&&(e.name=e.name||"Gecko",e.gecko=b,e.version=e.version||c(/gecko\/(\d+(\.\d+)?)/i)),e.msedge||!h&&!e.silk?f&&(e[f]=b,e.ios=b):e.android=b;var m="";e.windowsphone?m=c(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):f?(m=c(/os (\d+([_\s]\d+)*) like mac os x/i),m=m.replace(/[_\s]/g,".")):h?m=c(/android[ \/-](\d+(\.\d+)*)/i):e.webos?m=c(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):e.blackberry?m=c(/rim\stablet\sos\s(\d+(\.\d+)*)/i):e.bada?m=c(/bada\/(\d+(\.\d+)*)/i):e.tizen&&(m=c(/tizen[\/\s](\d+(\.\d+)*)/i)),m&&(e.osversion=m);var n=m.split(".")[0];return k||"ipad"==f||h&&(3==n||4==n&&!l)||e.silk?e.tablet=b:(l||"iphone"==f||"ipod"==f||h||e.blackberry||e.webos||e.bada)&&(e.mobile=b),e.msedge||e.msie&&e.version>=10||e.chrome&&e.version>=20||e.firefox&&e.version>=20||e.safari&&e.version>=6||e.opera&&e.version>=10||e.ios&&e.osversion&&e.osversion.split(".")[0]>=6||e.blackberry&&e.version>=10.1?e.a=b:e.msie&&e.version<10||e.chrome&&e.version<20||e.firefox&&e.version<20||e.safari&&e.version<6||e.opera&&e.version<10||e.ios&&e.osversion&&e.osversion.split(".")[0]<6?e.c=b:e.x=b,e}var b=!0,c=a("undefined"!=typeof navigator?navigator.userAgent:"");return c.test=function(a){for(var b=0;b<a.length;++b){var d=a[b];if("string"==typeof d&&d in c)return!0}return!1},c._detect=a,c})},{}],2:[function(a,b,c){b.exports=function(){var a=function(a){return function(b){var c=b[a];return c&&c.getAttribute("contenteditable")?c:null}};return{next:a("nextElementSibling"),previous:a("previousElementSibling")}}()},{}],3:[function(a,b,c){var d=a("./config"),e=a("./util/string"),f=a("./node-type");b.exports=function(){var a,b,c,g,h,i=/^\s*$/,j="<!-- BLOCK -->",k=function(d){var e,f,i=d.pastedHtmlRules;for(a=i.allowedElements||{},b=i.requiredAttributes||{},c=i.transformElements||{},g={},e=0;e<i.blockLevelElements.length;e++)f=i.blockLevelElements[e],g[f]=!0;for(h={},e=0;e<i.splitIntoBlocks.length;e++)f=i.splitIntoBlocks[e],h[f]=!0};return k(d),{updateConfig:k,paste:function(a,b,c){var e=a.ownerDocument;a.setAttribute(d.pastingAttribute,!0),b.isSelection&&(b=b.deleteContent()),b.save();var f=this.injectPasteholder(e);f.focus();var g=this;setTimeout(function(){var e;e=g.parseContent(f),$(f).remove(),a.removeAttribute(d.pastingAttribute),b.restore(),c(e,b)},0)},injectPasteholder:function(a){var b=$(a.createElement("div")).attr("contenteditable",!0).css({position:"fixed",right:"5px",top:"50%",width:"1px",height:"1px",overflow:"hidden",outline:"none"})[0];return $(a.body).append(b),b},parseContent:function(a){for(var b=this.filterHtmlElements(a),c=b.split(j),d=0;d<c.length;d++){var f=c[d];f=this.cleanWhitespace(f),f=e.trim(f),c[d]=f}return c=c.filter(function(a){return!i.test(a)})},filterHtmlElements:function(a,b){b||(b=[]);for(var c,d="",g=0;g<a.childNodes.length;g++)if(c=a.childNodes[g],c.nodeType===f.elementNode){var h=this.filterHtmlElements(c,b);d+=this.conditionalNodeWrap(c,h)}else c.nodeType===f.textNode&&(d+=e.escapeHtml(c.nodeValue));return d},conditionalNodeWrap:function(a,b){var c=a.nodeName.toLowerCase();if(c=this.transformNodeName(c),this.shouldKeepNode(c,a)){var d=this.filterAttributes(c,a);return"br"===c?"<"+c+d+">":i.test(b)?b:"<"+c+d+">"+b+"</"+c+">"}return h[c]?j+b+j:g[c]?b+" ":b},filterAttributes:function(b,c){for(var d="",e=0,f=(c.attributes||[]).length;f>e;e++){var g=c.attributes[e].name,h=c.attributes[e].value;a[b][g]&&h&&(d+=" "+g+'="'+h+'"')}return d},transformNodeName:function(a){return c[a]?c[a]:a},hasRequiredAttributes:function(a,c){var d,e,f=b[a];if(f)for(var g=0;g<f.length;g++)if(d=f[g],e=c.getAttribute(d),!e)return!1;return!0},shouldKeepNode:function(b,c){return a[b]&&this.hasRequiredAttributes(b,c)},cleanWhitespace:function(a){var b=a.replace(/(.)(\u00A0)/g,function(a,b,c,d,e){return/[\u0020]/.test(b)?b+" ":b+" "});return b}}}()},{"./config":4,"./node-type":16,"./util/string":25}],4:[function(a,b,c){b.exports={log:!1,logErrors:!0,editableClass:"js-editable",editableDisabledClass:"js-editable-disabled",pastingAttribute:"data-editable-is-pasting",boldTag:"strong",italicTag:"em",strikethroughTag:"<strike>",pastedHtmlRules:{allowedElements:{a:{href:!0},strong:{},em:{},br:{}},requiredAttributes:{a:["href"]},transformElements:{b:"strong",i:"em"},splitIntoBlocks:["h1","h2","h3","h4","h5","h6","p","blockquote"],blockLevelElements:["h1","h2","h3","h4","h5","h6","div","p","pre","hr","blockquote","article","figure","header","footer","ul","ol","li","section","table","video"]}}},{}],5:[function(a,b,c){var d,e=a("./node-type"),f=a("./range-save-restore"),g=a("./parser"),h=a("./util/string");b.exports=d=function(){var a=function(a,b,c){return b=f.save(b),c.call(d),f.restore(a,b)},b=/\u200B/g,c=/\uFEFF/g,i=/[^\S ]/g;return{tidyHtml:function(a){this.normalizeTags(a)},normalizeTags:function(a){var b,c,d,f,h=document.createDocumentFragment();for(b=0;b<a.childNodes.length;b++)if(d=a.childNodes[b],d&&("BR"===d.nodeName||d.textContent)){if(d.nodeType===e.elementNode&&"BR"!==d.nodeName){for(f=d;null!==(f=f.nextSibling)&&g.isSameNode(f,d);){for(c=0;c<f.childNodes.length;c++)d.appendChild(f.childNodes[c].cloneNode(!0));f.parentNode.removeChild(f)}this.normalizeTags(d)}h.appendChild(d.cloneNode(!0))}for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(h)},normalizeWhitespace:function(a){return a.replace(i," ")},cleanInternals:function(a){a.innerHTML=this.extractContent(a,!0)},extractContent:function(a,d){var f;f=a.nodeType===e.documentFragmentNode?this.getInnerHtmlOfFragment(a):a.innerHTML,f=f.replace(c,""),f=f.replace(b,"<br>");var g=document.createElement("div");return g.innerHTML=f,this.unwrapInternalNodes(g,d),g.innerHTML},getInnerHtmlOfFragment:function(a){var b=document.createElement("div");return b.appendChild(a),b.innerHTML},createFragmentFromString:function(a){for(var b=document.createDocumentFragment(),c=$("<div>").html(a).contents(),d=0;d<c.length;d++){var e=c[d];b.appendChild(e)}return b},adoptElement:function(a,b){return a.ownerDocument!==b?b.adoptNode(a):a},cloneRangeContents:function(a){for(var b=a.cloneContents(),c=b.childNodes[0],d=document.createDocumentFragment();c.childNodes.length;)d.appendChild(c.childNodes[0]);return d},unwrapInternalNodes:function(a,b){for(;a;){var c=a.nextSibling;if(a.nodeType===e.elementNode){var d=a.getAttribute("data-editable");a.firstChild&&this.unwrapInternalNodes(a.firstChild,b),"remove"===d?$(a).remove():"unwrap"===d?this.unwrap(a):"ui-remove"!==d||b?"ui-unwrap"!==d||b||this.unwrap(a):$(a).remove()}a=c}},getTags:function(a,b,c){for(var d=this.getInnerTags(b,c),e=b.commonAncestorContainer;e!==a;)(!c||c(e))&&d.push(e),e=e.parentNode;return d},getTagsByName:function(a,b,c){return this.getTags(a,b,function(a){return a.nodeName===c.toUpperCase()})},getInnerTags:function(a,b){return a.getNodes([e.elementNode],b)},getTagNames:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++)b.push(a[c].nodeName);return b},isAffectedBy:function(a,b,c){for(var d,e=this.getTags(a,b),f=0;f<e.length;f++)if(d=e[f],d.nodeName===c.toUpperCase())return!0;return!1},isExactSelection:function(a,b,c){var d=rangy.createRange();if(d.selectNodeContents(b),a.intersectsRange(d)){var e=a.toString(),f=$(b).text();return c&&(e=h.trim(e),f=h.trim(f)),""!==e&&e===f}return!1},expandTo:function(a,b,c){return b.selectNodeContents(c),b},toggleTag:function(a,b,c){var d=this.getTagsByName(a,b,c.nodeName);return 1===d.length&&this.isExactSelection(b,d[0],"visible")?this.removeFormatting(a,b,c.nodeName):this.forceWrap(a,b,c)},isWrappable:function(a){return a.canSurroundContents()},forceWrap:function(b,c,d){return c=a(b,c,function(){this.nuke(b,c,d.nodeName)}),this.isWrappable(c)||(c=a(b,c,function(){this.nuke(b,c)})),this.wrap(c,d),c},wrap:function(a,b){if(b=h.isString(b)?$(b)[0]:b,this.isWrappable(a)){a.surroundContents(b)}else console.log("content.wrap(): can not surround range")},unwrap:function(a){var b=$(a),c=b.contents();c.length?c.unwrap():b.remove()},removeFormatting:function(b,c,d){return a(b,c,function(){this.nuke(b,c,d)})},nuke:function(a,b,c){for(var d=this.getTags(a,b),e=0;e<d.length;e++){var f=d[e];"BR"===f.nodeName||c&&f.nodeName!==c.toUpperCase()||this.unwrap(f)}},insertCharacter:function(a,b,c){var d=document.createTextNode(b),e=a.cloneRange();e.collapse(c),e.insertNode(d),c?a.setStartBefore(d):a.setEndAfter(d),a.normalizeBoundaries()},surround:function(a,b,c,d){return d||(d=c),this.insertCharacter(b,d,!1),this.insertCharacter(b,c,!0),b},deleteCharacter:function(b,c,d){return this.containsString(c,d)&&(c.splitBoundaries(),c=a(b,c,function(){for(var a=h.regexp(d),b=c.getNodes([e.textNode],function(b){return b.nodeValue.search(a)>=0}),f=0;f<b.length;f++){var g=b[f];g.nodeValue=g.nodeValue.replace(a,"")}}),c.normalizeBoundaries()),c},containsString:function(a,b){var c=a.toString();return c.indexOf(b)>=0},nukeTag:function(a,b,c){for(var d=this.getTags(a,b),e=0;e<d.length;e++){var f=d[e];f.nodeName===c&&this.unwrap(f)}}}}()},{"./node-type":16,"./parser":17,"./range-save-restore":19,"./util/string":25}],6:[function(a,b,c){var d=a("./config"),e=a("./util/error"),f=a("./parser"),g=a("./content"),h=a("./clipboard"),i=a("./dispatcher"),j=a("./cursor"),k=a("./spellcheck"),l=a("./create-default-events"),m=a("bowser").browser,n=function(a){var b={window:window,defaultBehavior:!0,mouseMoveSelectionChanges:!1,browserSpellcheck:!0};this.config=$.extend(b,a),this.win=this.config.window,this.editableSelector="."+d.editableClass,rangy.initialized||rangy.init(),this.dispatcher=new i(this),this.config.defaultBehavior===!0&&this.dispatcher.on(l(this))};n.parser=f,n.content=g,n.browser=m,window.Editable=n,b.exports=n,n.globalConfig=function(a){$.extend(d,a),h.updateConfig(d)},n.prototype.add=function(a){return this.enable($(a)),this},n.prototype.remove=function(a){var b=$(a);return this.disable(b),b.removeClass(d.editableDisabledClass),this},n.prototype.disable=function(a){var b=this.win.document.body;return a=a||$("."+d.editableClass,b),a.removeAttr("contenteditable").removeAttr("spellcheck").removeClass(d.editableClass).addClass(d.editableDisabledClass),this},n.prototype.enable=function(a,b){var c=this.win.document.body;return a=a||$("."+d.editableDisabledClass,c),a.attr("contenteditable",!0).attr("spellcheck",this.config.browserSpellcheck).removeClass(d.editableDisabledClass).addClass(d.editableClass),b&&a.each(function(a,b){g.tidyHtml(b)}),this},n.prototype.suspend=function(a){var b=this.win.document.body;return a=a||$("."+d.editableClass,b),a.removeAttr("contenteditable"),this},n.prototype["continue"]=function(a){var b=this.win.document.body;return a=a||$("."+d.editableClass,b),a.attr("contenteditable",!0),this},n.prototype.createCursor=function(a,b){var c,d=$(a).closest(this.editableSelector);if(b=b||"beginning",d.length){var f=rangy.createRange();"beginning"===b||"end"===b?(f.selectNodeContents(a),f.collapse("beginning"===b?!0:!1)):a!==d[0]?"before"===b?(f.setStartBefore(a),f.setEndBefore(a)):"after"===b&&(f.setStartAfter(a),f.setEndAfter(a)):e("EditableJS: cannot create cursor outside of an editable block."),c=new j(d[0],f)}return c},n.prototype.createCursorAtBeginning=function(a){return this.createCursor(a,"beginning")},n.prototype.createCursorAtEnd=function(a){return this.createCursor(a,"end")},n.prototype.createCursorBefore=function(a){return this.createCursor(a,"before")},n.prototype.createCursorAfter=function(a){return this.createCursor(a,"after")},n.prototype.getContent=function(a){return g.extractContent(a)},n.prototype.appendTo=function(a,b){a=g.adoptElement(a,this.win.document),"string"==typeof b&&(b=g.createFragmentFromString(b));var c=this.createCursor(a,"end");return c.insertAfter(b),c},n.prototype.prependTo=function(a,b){a=g.adoptElement(a,this.win.document),"string"==typeof b&&(b=g.createFragmentFromString(b));var c=this.createCursor(a,"beginning");return c.insertBefore(b),c},n.prototype.getSelection=function(a){var b=this.dispatcher.selectionWatcher.getFreshSelection();if(a&&b){var c=b.range;try{c.compareNode(a)!==c.NODE_BEFORE_AND_AFTER&&(b=void 0)}catch(d){b=void 0}}return b},n.prototype.setupSpellcheck=function(a){return this.spellcheck=new k(this,a),this},n.prototype.on=function(a,b){return this.dispatcher.on(a,b),this},n.prototype.off=function(a,b){var c=Array.prototype.slice.call(arguments);return this.dispatcher.off.apply(this.dispatcher,c),this},n.prototype.unload=function(){return this.dispatcher.unload(),this};for(var o=function(a){n.prototype[a]=function(b){return this.on(a,b)}},p=["focus","blur","flow","selection","cursor","newline","insert","split","merge","empty","change","switch","move","clipboard","paste"],q=0;q<p.length;++q){var r=p[q];o(r)}},{"./clipboard":3,"./config":4,"./content":5,"./create-default-events":8,"./cursor":9,"./dispatcher":10,"./parser":17,"./spellcheck":22,"./util/error":23,bowser:1}],7:[function(a,b,c){var d=a("./parser"),e=a("./content"),f=a("./util/log"),g=a("./block");b.exports=function(a){var b=a.win.document;a.dispatcher.selectionWatcher;return{focus:function(a){if(d.isVoid(a)){var c=b.createElement("br");c.setAttribute("data-editable","remove"),a.appendChild(c)}},blur:function(a){e.cleanInternals(a)},selection:function(a,b){f(b?"Default selection behavior":"Default selection empty behavior")},cursor:function(a,b){f(b?"Default cursor behavior":"Default cursor empty behavior")},newline:function(a,c){var d=c.isAtEnd(),e=b.createElement("br");if(c.insertBefore(e),d){f("at the end");var g=b.createTextNode("​");c.insertAfter(g)}else f("not at the end");c.setVisibleSelection()},insert:function(a,b,c){var d=a.parentNode,e=a.cloneNode(!1);switch(e.id&&e.removeAttribute("id"),b){case"before":d.insertBefore(e,a),a.focus();break;case"after":d.insertBefore(e,a.nextSibling),e.focus()}},split:function(a,b,c,d){var f=a.cloneNode();f.appendChild(b);var g=a.parentNode;for(g.insertBefore(f,a);a.firstChild;)a.removeChild(a.firstChild);a.appendChild(c),e.tidyHtml(f),e.tidyHtml(a),a.focus()},merge:function(b,c,d){var f,h;switch(c){case"before":f=g.previous(b),h=b;break;case"after":f=b,h=g.next(b)}f&&h&&(d=f.childNodes.length>0?a.appendTo(f,h.innerHTML):a.prependTo(f,h.innerHTML),h.parentNode.removeChild(h),d.save(),e.tidyHtml(f),d.restore(),d.setVisibleSelection())},empty:function(a){f("Default empty behavior")},"switch":function(a,b,c){var d,e;switch(b){case"before":e=g.previous(a),e&&(c.moveAtTextEnd(e),c.setVisibleSelection());break;case"after":d=g.next(a),d&&(c.moveAtBeginning(d),c.setVisibleSelection())}},move:function(a,b,c){f("Default move behavior")},paste:function(b,c,d){var f,g=c[0];if(d.insertBefore(g),c.length<=1)d.setVisibleSelection();else{for(var h=b.parentNode,i=b,j=1;j<c.length;j++){var k=b.cloneNode(!1);k.id&&k.removeAttribute("id"),f=e.createFragmentFromString(c[j]),$(k).append(f),h.insertBefore(k,i.nextSibling),i=k}d=a.createCursorAtEnd(i),d.setVisibleSelection()}},clipboard:function(a,b,c){f("Default clipboard behavior")}}}},{"./block":2,"./content":5,"./parser":17,"./util/log":24}],8:[function(a,b,c){var d=a("./create-default-behavior");b.exports=function(a){var b=d(a);return{focus:function(a){b.focus(a)},blur:function(a){b.blur(a)},flow:function(a,c){b.flow(a,c)},selection:function(a,c){b.selection(a,c)},cursor:function(a,c){b.cursor(a,c)},newline:function(a,c){b.newline(a,c)},split:function(a,c,d,e){b.split(a,c,d,e)},insert:function(a,c,d){b.insert(a,c,d)},merge:function(a,c,d){b.merge(a,c,d)},empty:function(a){b.empty(a)},"switch":function(a,c,d){b["switch"](a,c,d)},move:function(a,c,d){b.move(a,c,d)},clipboard:function(a,c,d){b.clipboard(a,c,d)},paste:function(a,c,d){b.paste(a,c,d)}}}},{"./create-default-behavior":7}],9:[function(a,b,c){var d,e=a("./content"),f=a("./parser"),g=a("./util/string"),h=a("./node-type"),i=a("./util/error"),j=a("./range-save-restore");b.exports=d=function(){var a=function(a,b){this.setHost(a),this.range=b,this.isCursor=!0};return a.prototype=function(){return{isAtEnd:function(){return f.isEndOfHost(this.host,this.range.endContainer,this.range.endOffset)},isAtTextEnd:function(){return f.isTextEndOfHost(this.host,this.range.endContainer,this.range.endOffset)},isAtBeginning:function(){return f.isBeginningOfHost(this.host,this.range.startContainer,this.range.startOffset)},insertBefore:function(a){if(g.isString(a)&&(a=e.createFragmentFromString(a)),!f.isDocumentFragmentWithoutChildren(a)){a=this.adoptElement(a);var b=a;if(a.nodeType===h.documentFragmentNode){var c=a.childNodes.length-1;b=a.childNodes[c]}this.range.insertNode(a),this.range.setStartAfter(b),this.range.setEndAfter(b)}},insertAfter:function(a){g.isString(a)&&(a=e.createFragmentFromString(a)),f.isDocumentFragmentWithoutChildren(a)||(a=this.adoptElement(a),this.range.insertNode(a))},setSelection:function(){this.setVisibleSelection()},setVisibleSelection:function(){this.win.document.activeElement!==this.host&&$(this.host).focus(),rangy.getSelection(this.win).setSingleRange(this.range)},before:function(){var a=null,b=this.range.cloneRange();return b.setStartBefore(this.host),a=e.cloneRangeContents(b)},beforeHtml:function(){return e.getInnerHtmlOfFragment(this.before())},after:function(){var a=null,b=this.range.cloneRange();return b.setEndAfter(this.host),a=e.cloneRangeContents(b)},afterHtml:function(){return e.getInnerHtmlOfFragment(this.after())},getCoordinates:function(a){a=a||"absolute";var b=this.range.nativeRange.getBoundingClientRect();if("fixed"===a)return b;var c=this.win,d=void 0!==c.pageXOffset?c.pageXOffset:(c.document.documentElement||c.document.body.parentNode||c.document.body).scrollLeft,e=void 0!==c.pageYOffset?c.pageYOffset:(c.document.documentElement||c.document.body.parentNode||c.document.body).scrollTop;return{top:b.top+e,bottom:b.bottom+e,left:b.left+d,right:b.right+d,height:b.height,width:b.width}},moveBefore:function(b){return this.updateHost(b),this.range.setStartBefore(b),this.range.setEndBefore(b),this.isSelection?new a(this.host,this.range):void 0},moveAfter:function(b){return this.updateHost(b),this.range.setStartAfter(b),this.range.setEndAfter(b),this.isSelection?new a(this.host,this.range):void 0},moveAtBeginning:function(b){return b||(b=this.host),this.updateHost(b),this.range.selectNodeContents(b),this.range.collapse(!0),this.isSelection?new a(this.host,this.range):void 0},moveAtEnd:function(b){return b||(b=this.host),this.updateHost(b),this.range.selectNodeContents(b),this.range.collapse(!1),this.isSelection?new a(this.host,this.range):void 0},moveAtTextEnd:function(a){return this.moveAtEnd(f.latestChild(a))},setHost:function(a){a.jquery&&(a=a[0]),this.host=a,this.win=void 0===a||null===a?window:a.ownerDocument.defaultView},updateHost:function(a){var b=f.getHost(a);b||i("Can not set cursor outside of an editable block"),this.setHost(b)},retainVisibleSelection:function(a){this.save(),a(),this.restore(),this.setVisibleSelection()},save:function(){this.savedRangeInfo=j.save(this.range),this.savedRangeInfo.host=this.host},restore:function(){this.savedRangeInfo?(this.host=this.savedRangeInfo.host,this.range=j.restore(this.host,this.savedRangeInfo),this.savedRangeInfo=void 0):i("Could not restore selection")},equals:function(a){return a&&a.host&&a.host.isEqualNode(this.host)&&a.range&&a.range.equals(this.range)?!0:!1},createElement:function(a){return this.win.document.createElement(a)},adoptElement:function(a){return e.adoptElement(a,this.win.document)},triggerChange:function(){$(this.host).trigger("formatEditable")}}}(),a}()},{"./content":5,"./node-type":16,"./parser":17,"./range-save-restore":19,"./util/error":23,"./util/string":25}],10:[function(a,b,c){var d=a("./feature-detection"),e=a("./clipboard"),f=a("./eventable"),g=a("./selection-watcher"),h=a("./config"),i=a("./keyboard"),j=function(a){var b=a.win;f(this,a),this.supportsInputEvent=!1,this.$document=$(b.document),this.config=a.config,this.editable=a,this.editableSelector=a.editableSelector,this.selectionWatcher=new g(this,b),this.keyboard=new i(this.selectionWatcher),this.setup()};b.exports=j;var k=!1;j.prototype.setup=function(){this.setupElementEvents(),this.setupKeyboardEvents(),d.selectionchange?this.setupSelectionChangeEvents():this.setupSelectionChangeFallback()},j.prototype.unload=function(){this.off(),this.$document.off(".editable")},j.prototype.setupElementEvents=function(){var a=this;this.$document.on("focus.editable",a.editableSelector,function(b){this.getAttribute(h.pastingAttribute)||a.notify("focus",this)}).on("blur.editable",a.editableSelector,function(b){this.getAttribute(h.pastingAttribute)||a.notify("blur",this)}).on("copy.editable",a.editableSelector,function(b){var c=a.selectionWatcher.getFreshSelection();c.isSelection&&a.notify("clipboard",this,"copy",c)}).on("cut.editable",a.editableSelector,function(b){var c=a.selectionWatcher.getFreshSelection();c.isSelection&&(a.notify("clipboard",this,"cut",c),a.triggerChangeEvent(this))}).on("paste.editable",a.editableSelector,function(b){var c=this,d=function(b,d){b.length?(a.notify("paste",c,b,d),a.notify("change",c)):d.setVisibleSelection()},f=a.selectionWatcher.getFreshSelection();e.paste(this,f,d)}).on("input.editable",a.editableSelector,function(b){k?a.notify("change",this):k=!0}).on("formatEditable.editable",a.editableSelector,function(b){a.notify("change",this)})},j.prototype.triggerChangeEvent=function(a){k||this.notify("change",a)},j.prototype.dispatchSwitchEvent=function(a,b,c){var d;if(!(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)&&(d=this.selectionWatcher.getSelection(),d&&!d.isSelection)){var e=this;setTimeout(function(){var f=e.selectionWatcher.forceCursor();f.equals(d)&&(a.preventDefault(),a.stopPropagation(),e.notify("switch",b,c,f))},1)}},j.prototype.setupKeyboardEvents=function(){var a=this;this.$document.on("keydown.editable",this.editableSelector,function(b){var c=!k;a.keyboard.dispatchKeyEvent(b,this,c)}),this.keyboard.on("left",function(b){a.dispatchSwitchEvent(b,this,"before")}).on("up",function(b){a.dispatchSwitchEvent(b,this,"before")}).on("right",function(b){a.dispatchSwitchEvent(b,this,"after")}).on("down",function(b){a.dispatchSwitchEvent(b,this,"after")}).on("tab",function(a){}).on("shiftTab",function(a){}).on("esc",function(a){}).on("backspace",function(b){var c=a.selectionWatcher.getFreshRange();if(c.isCursor){var d=c.getCursor();d.isAtBeginning()?(b.preventDefault(),b.stopPropagation(),a.notify("merge",this,"before",d)):a.triggerChangeEvent(this)}else a.triggerChangeEvent(this)}).on("delete",function(b){var c=a.selectionWatcher.getFreshRange();if(c.isCursor){var d=c.getCursor();d.isAtTextEnd()?(b.preventDefault(),b.stopPropagation(),a.notify("merge",this,"after",d)):a.triggerChangeEvent(this)}else a.triggerChangeEvent(this)}).on("enter",function(b){b.preventDefault(),b.stopPropagation();var c=a.selectionWatcher.getFreshRange(),d=c.forceCursor();d.isAtTextEnd()?a.notify("insert",this,"after",d):d.isAtBeginning()?a.notify("insert",this,"before",d):a.notify("split",this,d.before(),d.after(),d)}).on("shiftEnter",function(b){b.preventDefault(),b.stopPropagation();var c=a.selectionWatcher.forceCursor();a.notify("newline",this,c)}).on("character",function(b){a.notify("change",this)})},j.prototype.setupSelectionChangeEvents=function(){var a=!1,b=!1,c=this.$document,d=this.selectionWatcher,e=this;c.on("selectionchange.editable",function(c){b?a=!0:d.selectionChanged()}),c.on("mousedown.editable",this.editableSelector,function(f){e.config.mouseMoveSelectionChanges===!1&&(b=!0,setTimeout($.proxy(d,"selectionChanged"),0)),c.on("mouseup.editableSelection",function(e){c.off(".editableSelection"),b=!1,a&&(a=!1,d.selectionChanged())})})},j.prototype.setupSelectionChangeFallback=function(){var a=this.$document,b=this.selectionWatcher;a.on("mouseup.editableSelection",function(a){setTimeout($.proxy(b,"selectionChanged"),0)}),a.on("keyup.editable",this.editableSelector,function(a){b.selectionChanged()})}},{"./clipboard":3,"./config":4,"./eventable":11,"./feature-detection":12,"./keyboard":14,"./selection-watcher":20}],11:[function(a,b,c){var d=function(a){var b={},c=function(a,c){void 0===b[a]&&(b[a]=[]),b[a].push(c)},d=function(a,c){var d=b[a];if(void 0!==d)for(var e=0,f=d.length;f>e;e++)if(d[e]===c){d.splice(e,1);break}};return{on:function(a,b){if(2===arguments.length)c(a,b);else if(1===arguments.length){var d=a;for(var e in d)c(e,d[e])}return this},off:function(a,c){2===arguments.length?d(a,c):1===arguments.length?b[a]=[]:b={}},notify:function(c,d){var e=Array.prototype.slice.call(arguments);a?(d=c,c=a,e=e.splice(1)):e=e.splice(2);var f=b[d];if(void 0!==f)for(var g=f.length-1;g>=0&&f[g].apply(c,e)!==!1;g--);}}};b.exports=function(a,b){var c=d(b);for(var e in c)a[e]=c[e]}},{}],12:[function(a,b,c){var d=a("bowser").browser;b.exports=function(){var a="undefined"!=typeof document.documentElement.contentEditable,b=function(){return!(d.gecko||d.opera)}(),c=function(){return!!d.webkit}();return{contenteditable:a,selectionchange:b,contenteditableSpanBug:c}}()},{bowser:1}],13:[function(a,b,c){var d=a("./node-iterator"),e=a("./node-type");b.exports=function(){return{extractText:function(a){var b="";return this.getText(a,function(a){b+=a}),b},getText:function(a,b){for(var c,f=new d(a);c=f.getNext();)c.nodeType===e.textNode&&""!==c.data?b(c.data):c.nodeType===e.elementNode&&"BR"===c.nodeName&&b(" ")},highlight:function(a,b,c){var d=this.find(a,b);this.highlightMatches(a,d,c)},find:function(a,b){for(var c,d=this.extractText(a),e=[],f=0;c=b.exec(d);)e.push(this.prepareMatch(c,f)),f+=1;return e},highlightMatches:function(a,b,c){if(b&&0!==b.length)for(var f,g,h,i,j,k,l,m=0,n=b[m],o=0,p=new d(a),q=[];f=p.getNext();)if(f.nodeType===e.textNode&&""!==f.data){g=f;var r=g.data,s=o+r.length;if(n.startIndex<s&&o<n.endIndex){j=k=!1,o<=n.startIndex&&(j=!0,l=n.startIndex),s>=n.endIndex&&(k=!0),i=j?n.startIndex-o:0,h=k?n.endIndex-o-i:r.length-i;var t={element:g,text:r.substring(i,i+h),offset:i,length:h,isLastPortion:k,wordId:l};if(q.push(t),k){var u=this.wrapWord(q,c);p.replaceCurrent(u),s=o+t.length+t.offset,q=[],m+=1,m<b.length&&(n=b[m])}}o=s}else if(f.nodeType===e.elementNode&&"BR"===f.nodeName){o+=1;continue}},getRange:function(a){var b=rangy.createRange();return b.selectNodeContents(a),b},wrapWord:function(a,b){for(var c,d=0;d<a.length;d++){var e=a[d];c=this.wrapPortion(e,b)}return c},wrapPortion:function(a,b){var c=rangy.createRange();c.setStart(a.element,a.offset),c.setEnd(a.element,a.offset+a.length);var d=b.cloneNode(!0);if(d.setAttribute("data-word-id",a.wordId),c.surroundContents(d),d.nextSibling){var f=d.nextSibling;f.nodeType===e.textNode&&""===f.data&&f.parentNode.removeChild(f)}return d},prepareMatch:function(a,b){return a[2]?this.prepareMatchForSecondSubgroup(a,b):{startIndex:a.index,endIndex:a.index+a[0].length,matchIndex:b,search:a[0]}},prepareMatchForSecondSubgroup:function(a,b){var c=a.index;return c+=a[1].length,{startIndex:c,endIndex:c+a[2].length,matchIndex:b,search:a[0]}}}}()},{"./node-iterator":15,"./node-type":16}],14:[function(a,b,c){var d=a("./feature-detection"),e=a("./node-type"),f=a("./eventable"),g=function(a){f(this),this.selectionWatcher=a};b.exports=g,g.prototype.dispatchKeyEvent=function(a,b,c){switch(a.keyCode){case this.key.left:this.notify(b,"left",a);break;case this.key.right:this.notify(b,"right",a);break;case this.key.up:this.notify(b,"up",a);break;case this.key.down:this.notify(b,"down",a);break;case this.key.tab:a.shiftKey?this.notify(b,"shiftTab",a):this.notify(b,"tab",a);break;case this.key.esc:this.notify(b,"esc",a);break;case this.key.backspace:this.preventContenteditableBug(b,a),this.notify(b,"backspace",a);break;case this.key["delete"]:this.preventContenteditableBug(b,a),this.notify(b,"delete",a);break;case this.key.enter:a.shiftKey?this.notify(b,"shiftEnter",a):this.notify(b,"enter",a);break;case this.key.ctrl:case this.key.shift:case this.key.alt:break;case 224:case 17:case 91:case 93:break;default:this.preventContenteditableBug(b,a),c&&this.notify(b,"character",a)}},g.prototype.preventContenteditableBug=function(a,b){if(d.contenteditableSpanBug){if(b.ctrlKey||b.metaKey)return;var c=this.selectionWatcher.getFreshRange();if(c.isSelection){var f,g=c.range;0===g.startOffset&&(g.startContainer.nodeType===e.textNode?f=g.startContainer.parentNode:g.startContainer.nodeType===e.elementNode&&(f=g.startContainer)),f&&f!==a&&g.containsNode(f,!0)&&f.remove()}}},g.prototype.key={left:37,up:38,right:39,down:40,tab:9,esc:27,backspace:8,"delete":46,enter:13,shift:16,ctrl:17,alt:18},g.key=g.prototype.key},{"./eventable":11,"./feature-detection":12,"./node-type":16}],15:[function(a,b,c){var d,e=a("./node-type");b.exports=d=function(){var a=function(a){this.root=a,this.current=this.next=this.root};return a.prototype.getNextTextNode=function(){for(var a;a=this.getNext();)if(a.nodeType===e.textNode&&""!==a.data)return a},a.prototype.getNext=function(){var a,b;if(b=this.current=this.next,a=this.next=void 0,this.current)if(a=b.firstChild,a&&"remove"!==b.getAttribute("data-editable"))this.next=a;else for(;b!==this.root&&!(this.next=b.nextSibling);)b=b.parentNode;return this.current},a.prototype.replaceCurrent=function(a){this.current=a,this.next=void 0;for(var b=this.current;b!==this.root&&!(this.next=b.nextSibling);)b=b.parentNode},a}()},{"./node-type":16}],16:[function(a,b,c){b.exports={elementNode:1,attributeNode:2,textNode:3,cdataSectionNode:4,entityReferenceNode:5,entityNode:6,
processingInstructionNode:7,commentNode:8,documentNode:9,documentTypeNode:10,documentFragmentNode:11,notationNode:12}},{}],17:[function(a,b,c){var d=a("./util/string"),e=a("./node-type"),f=a("./config");b.exports=function(){return{getHost:function(a){var b="."+f.editableClass,c=$(a).closest(b);return c.length?c[0]:void 0},getNodeIndex:function(a){for(var b=0;null!==(a=a.previousSibling);)b+=1;return b},isVoid:function(a){var b,c,d,f=a.childNodes;for(c=0,d=f.length;d>c;c++){if(b=f[c],b.nodeType===e.textNode&&!this.isVoidTextNode(b))return!1;if(b.nodeType===e.elementNode)return!1}return!0},isVoidTextNode:function(a){return a.nodeType===e.textNode&&!a.nodeValue},isWhitespaceOnly:function(a){return a.nodeType===e.textNode&&0===this.lastOffsetWithContent(a)},isLinebreak:function(a){return a.nodeType===e.elementNode&&"BR"===a.tagName},lastOffsetWithContent:function(a){if(a.nodeType===e.textNode)return d.trimRight(a.nodeValue).length;var b,c=a.childNodes;for(b=c.length-1;b>=0;b--)if(a=c[b],!this.isWhitespaceOnly(a)&&!this.isLinebreak(a))return b+1;return 0},isBeginningOfHost:function(a,b,c){if(b===a)return this.isStartOffset(b,c);if(this.isStartOffset(b,c)){var d=b.parentNode,e=this.getNodeIndex(b);return this.isBeginningOfHost(a,d,e)}return!1},isEndOfHost:function(a,b,c){if(b===a)return this.isEndOffset(b,c);if(this.isEndOffset(b,c)){var d=b.parentNode,e=this.getNodeIndex(b)+1;return this.isEndOfHost(a,d,e)}return!1},isStartOffset:function(a,b){return a.nodeType===e.textNode?0===b:0===a.childNodes.length?!0:a.childNodes[b]===a.firstChild},isEndOffset:function(a,b){return a.nodeType===e.textNode?b===a.length:0===a.childNodes.length?!0:b>0?a.childNodes[b-1]===a.lastChild:!1},isTextEndOfHost:function(a,b,c){if(b===a)return this.isTextEndOffset(b,c);if(this.isTextEndOffset(b,c)){var d=b.parentNode,e=this.getNodeIndex(b)+1;return this.isTextEndOfHost(a,d,e)}return!1},isTextEndOffset:function(a,b){if(a.nodeType===e.textNode){var c=d.trimRight(a.nodeValue);return b>=c.length}if(0===a.childNodes.length)return!0;var f=this.lastOffsetWithContent(a);return b>=f},isSameNode:function(a,b){var c,d,e;if(a.nodeType!==b.nodeType)return!1;if(a.nodeName!==b.nodeName)return!1;for(c=0,d=a.attributes.length;d>c;c++)if(e=a.attributes[c],b.getAttribute(e.name)!==e.value)return!1;return!0},latestChild:function(a){return a.lastChild?this.latestChild(a.lastChild):a},isDocumentFragmentWithoutChildren:function(a){return a&&a.nodeType===e.documentFragmentNode&&0===a.childNodes.length?!0:!1},isInlineElement:function(a,b){var c=b.currentStyle||a.getComputedStyle(b,""),d=c.display;switch(d){case"inline":case"inline-block":return!0;default:return!1}}}}()},{"./config":4,"./node-type":16,"./util/string":25}],18:[function(a,b,c){var d,e=a("./cursor"),f=a("./selection");b.exports=d=function(a,b){this.host=a&&a.jquery?a[0]:a,this.range=b,this.isAnythingSelected=void 0!==b,this.isCursor=this.isAnythingSelected&&b.collapsed,this.isSelection=this.isAnythingSelected&&!this.isCursor},d.prototype.getCursor=function(){return this.isCursor?new e(this.host,this.range):void 0},d.prototype.getSelection=function(){return this.isSelection?new f(this.host,this.range):void 0},d.prototype.forceCursor=function(){if(this.isSelection){var a=this.getSelection();return a.deleteContent()}return this.getCursor()},d.prototype.isDifferentFrom=function(a){a=a||new d;var b=this.range,c=a.range;return b&&c?!b.equals(c):b||c?!0:!1}},{"./cursor":9,"./selection":21}],19:[function(a,b,c){var d=a("./util/error"),e=a("./node-type");b.exports=function(){var a=0,b="\ufeff",c=function(a,b){return a.querySelector("#"+b)};return{insertRangeBoundaryMarker:function(c,e){var f,g="editable-range-boundary-"+(a+=1),h=c.commonAncestorContainer;(null===h.ownerDocument||void 0===h.ownerDocument)&&d("Cannot save range: range is emtpy");var i=h.ownerDocument.defaultView.document,j=c.cloneRange();return j.collapse(e),f=i.createElement("span"),f.id=g,f.setAttribute("data-editable","remove"),f.style.lineHeight="0",f.style.display="none",f.appendChild(i.createTextNode(b)),j.insertNode(f),f},setRangeBoundary:function(a,b,d,e){var f=c(a,d);f?(b[e?"setStartBefore":"setEndBefore"](f),f.parentNode.removeChild(f)):console.log("Marker element has been removed. Cannot restore selection.")},save:function(a){var b,c,d;return a.collapsed?(d=this.insertRangeBoundaryMarker(a,!1),b={markerId:d.id,collapsed:!0}):(d=this.insertRangeBoundaryMarker(a,!1),c=this.insertRangeBoundaryMarker(a,!0),b={startMarkerId:c.id,endMarkerId:d.id,collapsed:!1}),a.collapsed?a.collapseBefore(d):(a.setEndBefore(d),a.setStartAfter(c)),b},restore:function(a,b){if(!b.restored){var d=rangy.createRange();if(b.collapsed){var f=c(a,b.markerId);if(f){f.style.display="inline";var g=f.previousSibling;g&&g.nodeType===e.textNode?(f.parentNode.removeChild(f),d.collapseToPoint(g,g.length)):(d.collapseBefore(f),f.parentNode.removeChild(f))}else console.log("Marker element has been removed. Cannot restore selection.")}else this.setRangeBoundary(a,d,b.startMarkerId,!0),this.setRangeBoundary(a,d,b.endMarkerId,!1);return d.normalizeBoundaries(),d}}}}()},{"./node-type":16,"./util/error":23}],20:[function(a,b,c){var d,e=a("./parser"),f=a("./range-container"),g=a("./cursor"),h=a("./selection");b.exports=d=function(a,b){this.dispatcher=a,this.win=b||window,this.rangySelection=void 0,this.currentSelection=void 0,this.currentRange=void 0},d.prototype.getRangeContainer=function(){if(this.rangySelection=rangy.getSelection(this.win),this.rangySelection.rangeCount){var a=this.rangySelection.getRangeAt(0),b=e.getHost(a.commonAncestorContainer);if(b)return new f(b,a)}return new f},d.prototype.getFreshRange=function(){return this.getRangeContainer()},d.prototype.getFreshSelection=function(){var a=this.getRangeContainer();return a.isCursor?a.getCursor(this.win):a.getSelection(this.win)},d.prototype.getSelection=function(){return this.currentSelection},d.prototype.forceCursor=function(){var a=this.getRangeContainer();return a.forceCursor()},d.prototype.selectionChanged=function(){var a=this.getRangeContainer();if(a.isDifferentFrom(this.currentRange)){var b=this.currentSelection;this.currentRange=a,b&&(b.isCursor&&!this.currentRange.isCursor?this.dispatcher.notify("cursor",b.host):b.isSelection&&!this.currentRange.isSelection&&this.dispatcher.notify("selection",b.host)),this.currentRange.isCursor?(this.currentSelection=new g(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("cursor",this.currentSelection.host,this.currentSelection)):this.currentRange.isSelection?(this.currentSelection=new h(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("selection",this.currentSelection.host,this.currentSelection)):this.currentSelection=void 0}}},{"./cursor":9,"./parser":17,"./range-container":18,"./selection":21}],21:[function(a,b,c){var d=a("./cursor"),e=a("./content"),f=a("./parser"),g=a("./config");b.exports=function(){var a=function(a,b){this.setHost(a),this.range=b,this.isSelection=!0},b=function(){};return b.prototype=d.prototype,a.prototype=$.extend(new b,{text:function(){return this.range.toString()},html:function(){return this.range.toHtml()},isAllSelected:function(){return f.isBeginningOfHost(this.host,this.range.startContainer,this.range.startOffset)&&f.isTextEndOfHost(this.host,this.range.endContainer,this.range.endOffset)},getRects:function(){var a=this.range.nativeRange.getClientRects();return a},link:function(a,b){var c=$(this.createElement("a"));a&&c.attr("href",a);for(var d in b)c.attr(d,b[d]);this.forceWrap(c[0])},unlink:function(){this.removeFormatting("a")},toggleLink:function(a,b){var c=this.getTagsByName("a");if(c.length>=1){var d=c[0];this.isExactSelection(d,"visible")?this.unlink():this.expandTo(d)}else this.link(a,b)},toggle:function(a){a=this.adoptElement(a),this.range=e.toggleTag(this.host,this.range,a),this.setSelection()},makeBold:function(){var a=this.createElement(g.boldTag);this.forceWrap(a)},toggleBold:function(){var a=this.createElement(g.boldTag);this.toggle(a)},giveEmphasis:function(){var a=this.createElement(g.italicTag);this.forceWrap(a)},toggleEmphasis:function(){var a=this.createElement(g.italicTag);this.toggle(a)},makeStrikethrough:function(){var a=$(g.strikethroughTag);this.forceWrap(a[0])},toggleStrikethrough:function(){var a=$(g.strikethroughTag);this.toggle(a[0])},surround:function(a,b){this.range=e.surround(this.host,this.range,a,b),this.setSelection()},removeSurround:function(a,b){this.range=e.deleteCharacter(this.host,this.range,a),this.range=e.deleteCharacter(this.host,this.range,b),this.setSelection()},toggleSurround:function(a,b){this.containsString(a)&&this.containsString(b)?this.removeSurround(a,b):this.surround(a,b)},removeFormatting:function(a){this.range=e.removeFormatting(this.host,this.range,a),this.setSelection()},deleteContent:function(){return this.range.deleteContents(),new d(this.host,this.range)},expandTo:function(a){this.range=e.expandTo(this.host,this.range,a),this.setSelection()},collapseAtBeginning:function(a){return this.range.collapse(!0),this.setSelection(),new d(this.host,this.range)},collapseAtEnd:function(a){return this.range.collapse(!1),this.setSelection(),new d(this.host,this.range)},forceWrap:function(a){a=this.adoptElement(a),this.range=e.forceWrap(this.host,this.range,a),this.setSelection()},getTags:function(a){return e.getTags(this.host,this.range,a)},getTagsByName:function(a){return e.getTagsByName(this.host,this.range,a)},isExactSelection:function(a,b){return e.isExactSelection(this.range,a,b)},containsString:function(a){return e.containsString(this.range,a)},deleteCharacter:function(a){this.range=e.deleteCharacter(this.host,this.range,a),this.setSelection()}}),a}()},{"./config":4,"./content":5,"./cursor":9,"./parser":17}],22:[function(a,b,c){var d=a("./content"),e=a("./highlight-text"),f=a("./node-type");b.exports=function(){var a="\\u0041-\\u005A\\u0061-\\u007A\\u0030-\\u0039\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u017F\\u0180-\\u024F",b=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},c=function(a,b){var c={checkOnFocus:!1,checkOnChange:!0,throttle:1e3,removeOnCorrection:!0,markerNode:$('<span class="spellcheck"></span>'),spellcheckService:void 0};this.editable=a,this.win=a.win,this.config=$.extend(c,b),this.prepareMarkerNode(),this.setup()};return c.prototype.setup=function(a){this.config.checkOnFocus&&(this.editable.on("focus",$.proxy(this,"onFocus")),this.editable.on("blur",$.proxy(this,"onBlur"))),(this.config.checkOnChange||this.config.removeOnCorrection)&&this.editable.on("change",$.proxy(this,"onChange"))},c.prototype.onFocus=function(a){this.focusedEditable!==a&&(this.focusedEditable=a,this.editableHasChanged(a))},c.prototype.onBlur=function(a){this.focusedEditable===a&&(this.focusedEditable=void 0)},c.prototype.onChange=function(a){this.config.checkOnChange&&this.editableHasChanged(a,this.config.throttle),this.config.removeOnCorrection&&this.removeHighlightsAtCursor(a)},c.prototype.prepareMarkerNode=function(){var a=this.config.markerNode;a.jquery&&(a=a[0]),a=d.adoptElement(a,this.win.document),this.config.markerNode=a,a.setAttribute("data-editable","ui-unwrap"),a.setAttribute("data-spellcheck","spellcheck")},c.prototype.createMarkerNode=function(){return this.config.markerNode.cloneNode()},c.prototype.removeHighlights=function(a){$(a).find("[data-spellcheck=spellcheck]").each(function(a,b){d.unwrap(b)})},c.prototype.removeHighlightsAtCursor=function(a){var b,c=this.editable.getSelection(a);if(c&&c.isCursor){var e=c.range.startContainer;e.nodeType===f.textNode&&(e=e.parentNode);do{if(e===a)return;if(e.hasAttribute("data-word-id")){b=e.getAttribute("data-word-id");break}}while(e=e.parentNode);b&&c.retainVisibleSelection(function(){$(a).find("[data-word-id="+b+"]").each(function(a,b){d.unwrap(b)})})}},c.prototype.createRegex=function(c){var d=$.map(c,function(a){return b(a)}),e="";return e+="([^"+a+"]|^)",e+="("+d.join("|")+")",e+="(?=[^"+a+"]|$)",new RegExp(e,"g")},c.prototype.highlight=function(a,b){if(this.removeHighlights(a),b&&b.length>0){var c=this.createRegex(b),d=this.createMarkerNode();e.highlight(a,c,d)}},c.prototype.editableHasChanged=function(a,b){this.timeoutId&&this.currentEditableHost===a&&clearTimeout(this.timeoutId);var c=this;this.timeoutId=setTimeout(function(){c.checkSpelling(a),c.currentEditableHost=void 0,c.timeoutId=void 0},b||0),this.currentEditableHost=a},c.prototype.checkSpelling=function(a){var b=this,c=e.extractText(a);c=d.normalizeWhitespace(c),this.config.spellcheckService(c,function(c){var d=b.editable.getSelection(a);d?d.retainVisibleSelection(function(){b.highlight(a,c)}):b.highlight(a,c)})},c}()},{"./content":5,"./highlight-text":13,"./node-type":16}],23:[function(a,b,c){var d=a("../config");b.exports=function(){if(d.logErrors!==!1){var a;return a=Array.prototype.slice.call(arguments),1===a.length&&(a=a[0]),window.console&&"function"==typeof window.console.error?console.error(a):window.console?console.log(a):void 0}}},{"../config":4}],24:[function(a,b,c){var d=a("../config");b.exports=function(){if(d.log!==!1){var a,b;return a=Array.prototype.slice.call(arguments),a.length&&"trace"===a[a.length-1]&&(a.pop(),((b=window.console)?b.trace:void 0)&&console.trace()),1===a.length&&(a=a[0]),window.console?console.log(a):void 0}}},{"../config":4}],25:[function(a,b,c){b.exports=function(){var a=Object.prototype.toString,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return{trimRight:function(a){return a.replace(/\s+$/,"")},trimLeft:function(a){return a.replace(/^\s+/,"")},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},isString:function(b){return"[object String]"===a.call(b)},regexp:function(a,b){b||(b="g");var c=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return new RegExp(c,b)},escapeHtml:function(a,c){return a.replace(c?/[&<>'"]/g:/[&<>]/g,function(a){return b[a]})},browserEscapeHtml:function(a){var b=document.createElement("div");return b.appendChild(document.createTextNode(a)),b.innerHTML}}}()},{}]},{},[6]);